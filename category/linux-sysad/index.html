<!DOCTYPE html>
<html lang="vi">
    <head>
    <title>
         linux-sysad | ctnguyenvn 
    </title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <meta property="og:description" content="Culi vật vã theo năm tháng" />
    
    <meta name="author" content="ctnguyenvn" />
    
    <meta
        property="og:title"
        content="linux-sysad - Culi vật vã theo năm tháng"
    />
    <meta
        property="twitter:title"
        content="linux-sysad - Culi vật vã theo năm tháng"
    />
     
    <meta property="og:image" content="https://.ctnguyenvn.me/assets/img/ctnguyenvn.webp" />
    <meta property="twitter:image" content="https://.ctnguyenvn.me/assets/img/ctnguyenvn.webp" />
    
    <meta property="og:site_name" content="ctnguyenvn - System security" />


    <link
        rel="stylesheet"
        type="text/css"
        href="https://.ctnguyenvn.me/assets/css/styles.css"
    />
    <link
        rel="stylesheet"
        type="text/css"
        href="https://.ctnguyenvn.me/assets/css/highlight.css"
    />
    <link
        rel="alternate"
        type="application/rss+xml"
        title=" - Culi vật vã theo năm tháng"
        href="https://.ctnguyenvn.me/feed.xml"
    />
    <link rel="canonical" href="https://.ctnguyenvn.me/category/linux-sysad/index.html" />
    <meta name="theme-color" content="#000000" />
    <link
        rel="icon"
        type="image/png"
        sizes="32x32"
        href="https://.ctnguyenvn.me/assets/img/ctnguyenvn.png"
    />
        
</head>

    <body>
        <div class="wrapper">
            <div class="topbar"><nav>
    <input type="checkbox" id="check" />
    <label for="check" class="checkbtn"
        ><i>
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="25"
                height="25"
                fill="currentColor"
                class="bi bi-list"
                viewBox="0 0 16 16"
            >
                <path
                    fill-rule="evenodd"
                    d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"
                />
            </svg> </i
    ></label>
    <div class="site-author">
        <a href="/">ctnguyenvn</a>
		<p>Culi vật vã theo năm tháng</p>
    </div>
    <ul>
        <li><a href="/category/linux-sysad">Linux Sysad</a></li>
        <li><a href="/category/tutorials">Tutorials</a></li>
        <li><a href="/category/tip-tricks">Tip & Trick</a></li>
        <li><a href="/category/dfir">DFIR</a></li>
        <li><a href="/archive">Archive</a></li>
    </ul>
</nav>
</div>
            <div class="main">
                 <div class="post">
	<p class="head-autopage"> Category Archives: linux sysad </p>
    
    <article>
        <div class="post-title">
            <p>Feb 22 2023</p>
            <p><a href="/collect-log-from-cisco-ios-to-ELK/">Thu thập log từ Cisco IOS về SIEM (ELK)</a></p>
        </div>
        <div class="post-content"><p>Trong thực tế đối với các thiết bị như router/switch các team network/system sẽ sử dụng một số công cụ như zabbix, SolarWinds, Nagios… để tích hợp nhằm mục đích monitoring (thường sẽ là traffic/status interface…). Tuy nhiên hôm nay tôi có nhu cầu thu thập nhật ký audit/logon/history command… nhằm phục vụ công việc ghi nhận nhật ký login, thao tác của tài khoản quản trị trên các thiết bị router/switch này.</p>

<h3 id="sơ-lược-mô-hình">Sơ lược mô hình</h3>

<p>Trong bài viết này tôi sẽ chia sẻ một bài Lab nhỏ nhằm thu thập một số nhật ký cần thiết trên các thiết bị router/switch về hệ thống SIEM. Cụ thể tôi sẽ sử dụng IOS Version 12.4 Router 3700 Software (C3725-ADVENTERPRISEK9-M) giả lập trên phần mềm GNS3 kết hợp với ELK. ELK được build trên docker theo mô hình AIO và được cài đặt trên máy ảo vmware chạy hệ điều hành CentOS 7.</p>

<p>Mô hình cơ bản như sau</p>

<p><img src="/images/ELK/cisco/1.png" alt="" /></p>

<blockquote>
  <p>Lưu ý: Hiện tại tôi gửi log về logstash nhằm mục đích parse manual, tuy nhiên thực tế hiện tại filebeat có module cisco tương đối đủ để auto parse mà không cần parse tay ở logstash. Ngược lại với cách này yêu cầu dựng 1 server trung gian khác chạy filebeat để listen nên tôi không đề cập trong bài viết này.</p>
</blockquote>

</div>
        <div class="post-meta">
            <span> Post in </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-bookmark"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"
                    />
                </svg>
            </i>
            <span>
                 
                <a
                    href="/category/linux-sysad"
                    >linux-sysad,</a
                >
                 
            </span>

            <span> with tagged </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-tag"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"
                    />
                    <path
                        d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"
                    />
                </svg>
            </i>
            <span class="post-tag">
                 
                <a
                    href="/tag/collect-log"
                    >collect-log,</a
                >  
                <a
                    href="/tag/elk"
                    >ELK,</a
                >  
            </span>
        </div>
    </article>

    
    <article>
        <div class="post-title">
            <p>Nov  6 2022</p>
            <p><a href="/mot-so-vim-key-co-ban/">Một số key trong vim giúp edit nhanh hơn</a></p>
        </div>
        <div class="post-content"><p>Vim hay Neovim là một editer mạnh mẽ phổ biến trên các nền tảng *nix. Bài viết này ngoài ghi chép một số vimkey cơ bản hay dùng còn note lại các vimkey được config tại <a href="https://github.com/ctnguyenvn/vimrc/tree/neovim">vim repo</a> trong một số plugin mà tôi hay dùng.</p>

<p><img src="https://ctnguyenvn.me/images/nvim/neovim-avt.webp" alt="neovim" class="center-image" /></p>

<p>Một số vimkey sau đây không được sắp xếp theo các group mà chủ yếu là các vimkey tôi hay dùng. Bạn có thể xem thêm rất nhiều vimkey khác đã được group tại <a href="https://devhints.io/vim">đây</a>.</p>

</div>
        <div class="post-meta">
            <span> Post in </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-bookmark"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"
                    />
                </svg>
            </i>
            <span>
                 
                <a
                    href="/category/linux-sysad"
                    >linux-sysad,</a
                >
                 
                <a
                    href="/category/tip-tricks"
                    >tip-tricks,</a
                >
                 
            </span>

            <span> with tagged </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-tag"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"
                    />
                    <path
                        d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"
                    />
                </svg>
            </i>
            <span class="post-tag">
                 
                <a
                    href="/tag/vim"
                    >vim,</a
                >  
                <a
                    href="/tag/linux-command"
                    >linux command,</a
                >  
            </span>
        </div>
    </article>

    
    <article>
        <div class="post-title">
            <p>Apr  3 2021</p>
            <p><a href="/dig-command/">Sử dụng Dig (Domain Information Groper) - truy vấn DNS</a></p>
        </div>
        <div class="post-content"><p><code class="language-plaintext highlighter-rouge">Dig</code> là một công cụ mạnh mẽ và linh hoạt trong việc truy vấn các máy chủ DNS.
<code class="language-plaintext highlighter-rouge">Dig</code> thực hiện truy vấn DNS và hiển thị kết quả từ các máy chủ được truy vấn.
Các truy vấn phổ biến gồm NS, CNAME, MX, TXT…</p>

<h3 id="1-cài-đặt-dig">1. Cài đặt Dig</h3>

<p>Đối với Ubuntu/Debian</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo apt install dnsutils
</code></pre></div></div>

<p>Đối với CentOS/Fedora</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo yum install bind-utils
</code></pre></div></div>

<p>Có thể kiểm tra kết quả cài đặt dig như sau:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ dig -v
DiG 9.16.13
</code></pre></div></div>

</div>
        <div class="post-meta">
            <span> Post in </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-bookmark"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"
                    />
                </svg>
            </i>
            <span>
                 
                <a
                    href="/category/linux-sysad"
                    >linux-sysad,</a
                >
                 
            </span>

            <span> with tagged </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-tag"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"
                    />
                    <path
                        d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"
                    />
                </svg>
            </i>
            <span class="post-tag">
                 
                <a
                    href="/tag/notes"
                    >Notes,</a
                >  
                <a
                    href="/tag/linux-command"
                    >linux command,</a
                >  
            </span>
        </div>
    </article>

    
    <article>
        <div class="post-title">
            <p>Feb 13 2021</p>
            <p><a href="/git-command-basic/">Tổng hợp một số lệnh cơ bản khi sử dụng git/github</a></p>
        </div>
        <div class="post-content"><p>Git là một hệ thống quản lý phiên phản phân tán (Distributed Version Control System – Distributed VCS) các mã nguồn phổ biến được release bởi Linus Torvalds năm 2005. VCS là hệ thống cho phép các lập trình viên quản lý kiểm soát sự thay đổi trên mã nguồn của mình, cụ thể lập trình viên có thể lưu trữ nhiều phiên bản khác nhau của mã nguồn phần mềm, thêm sửa xóa code hay xem lịch sử thay đổi và những thay đổi được thực hiện bởi người nào. vv</p>

<p>Một số cheat sheet &amp; tip link git</p>

<ul>
  <li><a href="https://quickref.me/git">https://quickref.me/git</a></li>
  <li><a href="http://schubert.atmos.colostate.edu/~cslocum/cseg_git_cheat_sheet.pdf">http://schuber…/cseg_git_cheat_sheet.pdf</a></li>
  <li><a href="https://github.com/git-tips/tips">https://github.com/git-tips/tips</a></li>
</ul>

<h3 id="một-số-lệnh-cơ-bản">Một số lệnh cơ bản</h3>
<hr />

<h5 id="cấu-hình-thông-tin-useremail">Cấu hình thông tin user/email</h5>

<p>Cấu hình user/email</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ git config --global user.name "&lt;user name&gt;"
ctnguyenvn[~]$ git config --global user.email "&lt;user email&gt;"
</code></pre></div></div>

<p>Xem cấu hình</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ git config --list
</code></pre></div></div>

</div>
        <div class="post-meta">
            <span> Post in </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-bookmark"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"
                    />
                </svg>
            </i>
            <span>
                 
                <a
                    href="/category/linux-sysad"
                    >linux-sysad,</a
                >
                 
            </span>

            <span> with tagged </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-tag"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"
                    />
                    <path
                        d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"
                    />
                </svg>
            </i>
            <span class="post-tag">
                 
                <a
                    href="/tag/git"
                    >Git,</a
                >  
                <a
                    href="/tag/notes"
                    >Notes,</a
                >  
            </span>
        </div>
    </article>

    
    <article>
        <div class="post-title">
            <p>Feb  1 2021</p>
            <p><a href="/install-add-devices-zabbix-agent/">Giám sát một số devices với zabbix agent, SNMP</a></p>
        </div>
        <div class="post-content"><p>Trong
<a href="https://ctnguyenvn.me/2021/01/31/zabbix-install-config-full">bài viết trước</a>
tôi đã cài đặt và cấu hình cơ bản zabbix với mô hình lab đơn giản. Trong bài này
tôi sẽ thêm một số device vào zabbix để giám sát chúng. Ngoài ra cũng cấu hình
thêm việc nhận thông báo qua email. Mô hình cụ thể vẫn như sơ đồ sau:</p>

<p><img src="https://ctnguyenvn.me/images/zabbix/0.png" alt="zabbix" class="center-image" /></p>

<table>
  <thead>
    <tr>
      <th>Thông tin</th>
      <th> </th>
      <th>Hostname</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>R1</td>
      <td>Cisco 3640</td>
      <td>R-C3640</td>
    </tr>
    <tr>
      <td>Linux</td>
      <td>CentOS 7</td>
      <td>LinuxAgent</td>
    </tr>
    <tr>
      <td>Linux</td>
      <td>Ubuntu 18.04</td>
      <td>Zabbix-Server</td>
    </tr>
    <tr>
      <td>Windows</td>
      <td>Windows server 2012</td>
      <td>WindowAgent</td>
    </tr>
    <tr>
      <td>Soft</td>
      <td>GNS3 2.2.17</td>
      <td> </td>
    </tr>
    <tr>
      <td>IP</td>
      <td>Như mô hình</td>
      <td> </td>
    </tr>
  </tbody>
</table>

</div>
        <div class="post-meta">
            <span> Post in </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-bookmark"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"
                    />
                </svg>
            </i>
            <span>
                 
                <a
                    href="/category/linux-sysad"
                    >linux-sysad,</a
                >
                 
                <a
                    href="/category/tutorials"
                    >tutorials,</a
                >
                 
            </span>

            <span> with tagged </span>
            <i>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    fill="currentColor"
                    class="bi bi-tag"
                    viewBox="0 0 16 16"
                >
                    <path
                        d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"
                    />
                    <path
                        d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"
                    />
                </svg>
            </i>
            <span class="post-tag">
                 
                <a
                    href="/tag/tools"
                    >Tools,</a
                >  
                <a
                    href="/tag/monitoring"
                    >Monitoring,</a
                >  
            </span>
        </div>
    </article>

    
    <!-- pagination -->
    <!-- Pagination links -->
<div class="pagination">
  
    <span class="previous">Previous</span>
  
  <span class="page_number ">
    Page: 1 of 2
  </span>
  
    <a href="/category/linux-sysad/2/" class="next">Next</a>
  
</div>

</div>


            </div>
            <div class="footer"><div class="footer__inner">
    @2023 <a href="https://.ctnguyenvn.me">ctnguyenvn</a> |
    <a href="https://.ctnguyenvn.me/about">About</a>
</div>
</div>
        </div>
    </body>
	<script src="/assets/js/custom.js"></script>
</html>
