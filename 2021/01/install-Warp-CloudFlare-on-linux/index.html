<!doctype html>
<html lang="vi">
    <head>
    <title>
         Cài đặt VPN Warp CloudFlare trên Linux | ctnguyenvn 
    </title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <meta property="og:description" content="Warp là chương trình VPN (có cung cấp phiên bản miễn phí) được cung cấp bởi
CloudFlare. Hiện tại Warp client chỉ hỗ trợ Anroid/IOS và
windows/OSX. Tuy không được CloudFlare hỗ trợ cho phiên bản Linux nhưng chúng ta
có thể sử dụng warp thông qua Wireguard.

Cài đặt Wireguard

Arch

ctnguyenvn[~]$ sudo pacman -S wireguard-tools


Ubuntu

ctnguyenvn[~]$ sudo apt install wireguard



  Lưu ý: Nếu sử dụng Linux distro khác thì có thể xem cài đặt tại
đây


" />
    
    <meta name="author" content="ctnguyenvn" />
    
    <meta property="og:title" content="Cài đặt VPN Warp CloudFlare trên Linux - Happy Investigating" />
    <meta property="twitter:title" content="Cài đặt VPN Warp CloudFlare trên Linux - Happy Investigating" />
     
    <meta property="og:image" content="https://ctnguyenvn.github.io/assets/img/ctnguyenvn.webp" />
    <meta property="twitter:image" content="https://ctnguyenvn.github.io/assets/img/ctnguyenvn.webp" />
    
    <meta property="og:site_name" content="ctnguyenvn - System security" />
    <!-- <link rel="stylesheet" type="text/css" href="https://ctnguyenvn.github.io/assets/css/bulma.min.css" /> -->
	<script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" type="text/css" href="https://ctnguyenvn.github.io/assets/css/styles.css" />
    <link rel="stylesheet" type="text/css" href="https://ctnguyenvn.github.io/assets/css/highlight.css" />
    <link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap" rel="stylesheet" />
    <link
        rel="alternate"
        type="application/rss+xml"
        title=" - Happy Investigating"
        href="https://ctnguyenvn.github.io/feed.xml"
    />
    <link rel="canonical" href="https://ctnguyenvn.github.io/2021/01/install-Warp-CloudFlare-on-linux/" />
    <meta name="theme-color" content="#000000" />
    <link rel="icon" type="image/png" sizes="32x32" href="https://ctnguyenvn.github.io/assets/img/ctnguyenvn.png" />
        
</head>

    <body>
		<div>
			<div class="border-b"><nav class="max-w-screen-lg mx-auto flex justify-between items-center p-4">
    <div class="">
        <a href="https://ctnguyenvn.github.io">
            <img src="https://ctnguyenvn.github.io/assets/img/ctnguyenvn.png" class="h-6" alt="ctnguyenvn" />
        </a>
    </div>
    <div class="hidden md:flex justify-center gap-6">
        <a href="/" class="text-xs font-medium uppercase px-2 hover:text-yellow-400">Home</a>
        <a href="/" class="text-xs font-medium uppercase px-2 hover:text-yellow-400">Blog</a>
        <a href="/projects" class="text-xs font-medium uppercase px-2 hover:text-yellow-400">Projects</a>
        <a href="/about" class="text-xs font-medium uppercase px-2 hover:text-yellow-400">About</a>
    </div>
    <div class="flex gap-4">
        <a href="https://github.com/ctnguyenvn" class="hover:text-yellow-400">
            <i class="bi bi-github"></i>
        </a>
        <a href="https://twitter.com/ctnguyenvn" class="hover:text-yellow-400">
            <i class="bi bi-twitter"></i>
        </a>
        <a href="https://t.me/ctnguyenvn" class="hover:text-yellow-400">
            <i class="bi bi-telegram"></i>
        </a>
    </div>
</nav>
</div>
			<main><div class="max-w-screen-lg mx-auto my-2 py-2 md:my-6 md:py-6 px-4">
    <div class="text-center pt-4">
        <p>
             
            <a class="text-sm bg-yellow-300 px-2 py-1 rounded px mx-1 hover:opacity-90" href="/tag/vpn">VPN</a>
             
        </p>
        <h1 class="text-4xl font-semibold pt-1 pb-2">
            <a href="/2021/01/install-Warp-CloudFlare-on-linux/" class="is-size-3 has-text-black-ter has-text-weight-semibold">Cài đặt VPN Warp CloudFlare trên Linux</a>
        </h1>
        <div class="text-md pt-1">
            <span class="text-gray-400">Posted by</span>
            <a href="https://ctnguyenvn.github.io/about" class="text-[#007cc3]">ctnguyenvn</a>
            <span class="text-gray-400">on</span>
            <i class="bi bi-clock px-1 text-gray-400 text-sm"></i>
            <span class="text-[#007cc3]">4 January, 2021</span>
        </div>
    </div>
    <div class="content my-4 py-4"><p>Warp là chương trình VPN (có cung cấp phiên bản miễn phí) được cung cấp bởi
CloudFlare. Hiện tại <a href="https://1.1.1.1/">Warp client</a> chỉ hỗ trợ Anroid/IOS và
windows/OSX. Tuy không được CloudFlare hỗ trợ cho phiên bản Linux nhưng chúng ta
có thể sử dụng warp thông qua Wireguard.</p>

<h4 id="cài-đặt-wireguard">Cài đặt Wireguard</h4>

<p>Arch</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo pacman -S wireguard-tools
</code></pre></div></div>

<p>Ubuntu</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo apt install wireguard
</code></pre></div></div>

<blockquote>
  <p>Lưu ý: Nếu sử dụng Linux distro khác thì có thể xem cài đặt tại
<a href="https://www.wireguard.com/install/">đây</a></p>
</blockquote>

<!--more-->

<h4 id="cài-đặt-wgcf">Cài đặt wgcf</h4>

<p>Đây là chương trình hỗ trợ đăng ký account và generate tập tin cấu hình cho
<code class="language-plaintext highlighter-rouge">Wireguard</code>. Nếu không sử dụng <code class="language-plaintext highlighter-rouge">wgcf</code> bạn có thể truy cập vào
<a href="https://1111.4it.top">đây</a> để đăng ký tài khoản và lưu tập tin cấu hình về máy.</p>

<p>Để cài đặt bản mới nhất của <code class="language-plaintext highlighter-rouge">wgcf</code> bạn truy cập vào
<a href="https://github.com/ViRb3/wgcf/releases">đây</a> để tải bản phù hợp với phiên bản
linux đang sử dụng. Ngoài ra bạn có thể sử dụng lệnh sau để tự động tải phiên
bản mới nhất về</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ curl -s "https://api.github.com/repos/ViRb3/wgcf/releases/latest" \
        | grep "browser_download_url.*linux_amd64" \
        | cut -d: -f 2,3 \
        | tr -d \" \
        | wget -i -
</code></pre></div></div>

<p>Tiếp theo thực hiện các lệnh sau</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo mkdir /opt/wgcf
ctnguyenvn[~]$ sudo mv wgcf* /opt/wgcf/wgcf
ctnguyenvn[~]$ sudo chmod +x /opt/wgcf/wgcf
</code></pre></div></div>

<h4 id="tạo-profile-warp">Tạo profile warp</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo /opt/wgcf/wgcf register --accept-tos --config /opt/wgcf/warp-account.toml
ctnguyenvn[~]$ sudo /opt/wgcf/wgcf generate -p /opt/wgcf/warp.conf --config /opt/wgcf/warp-account.toml
</code></pre></div></div>

<p>Nếu muốn update key khi cần sử dụng warp+ thì bạn có thể mở file
<code class="language-plaintext highlighter-rouge">/opt/wgcf/warp-account.toml</code> và sửa dòng <code class="language-plaintext highlighter-rouge">lincese_key</code> thành key mới</p>

<p><img src="https://ctnguyenvn.github.io/images/install-warp/1.png" alt="wg show" class="center-image" /></p>

<p>và thực hiện lệnh</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo /opt/wgcf/wgcf update --config /opt/wgcf/warp-account.toml
</code></pre></div></div>

<blockquote>
  <p>Lưu ý: có thể sử dụng env để update nhanh với lệnh sau</p>

  <p>ctnguyenvn[~]$ WGCF_LICENSE_KEY=”put_key_here” /opt/wgcf/wgcf update –config /opt/wgcf/warp-account.toml</p>
</blockquote>

<h4 id="copy-tập-tin-cấu-hình-sang-wireguard">Copy tập tin cấu hình sang Wireguard</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo cp -r /opt/wgcf/warp.conf /etc/wireguard/
</code></pre></div></div>

<h4 id="startstop-wireguard-sử-dụng-cấu-hình-warp-vpn">start/stop wireguard sử dụng cấu hình warp vpn</h4>

<p>Để kích hoạt ta sử dụng lệnh</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo wg-quick up warp
</code></pre></div></div>

<blockquote>
  <p>Lưu ý: Nếu gặp lỗi: <code class="language-plaintext highlighter-rouge">wg-quick: 'warp' already exists</code> thì tên device đã tồn
tại, có thể xóa device này sử dụng lệnh sau:</p>

  <p>ctnguyenvn[~]$ sudo ip link delet dev warp</p>
</blockquote>

<p>Để dừng sử dụng vpn ta sử dụng</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo wg-quick down warp
</code></pre></div></div>

<p>Kiểm tra kết quả</p>

<p><img src="https://ctnguyenvn.github.io/images/install-warp/2.png" alt="wg show" class="center-image" /></p>

<p>Ngoài ra có thể tự động kích hoạt vpn warp khi khởi động OS ta có thể sử dụng</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo systemctl enable wg-quick@warp
</code></pre></div></div>

<h4 id="một-số-lưu-ý">Một số lưu ý:</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">wgcf</code> chỉ có nhiệm vụ khởi tạo tài khoản và generate tập tin cấu hình, việc
này có thể thực hiện qua phiên bản web như đã nói ở trên.</p>
  </li>
  <li>
    <p>Tên của device có thể thay đổi tùy ý, ví dụ thay đổi từ <code class="language-plaintext highlighter-rouge">warp</code> sang <code class="language-plaintext highlighter-rouge">xxx</code>,
tuy nhiên nếu thực hiện thay đổi này thì cần thay đổi lệnh up/down và enable
phù hợp với device name mới.</p>
  </li>
</ul>

<blockquote>
  <p>Ví dụ</p>

  <p>ctnguyenvn[~]$ sudo wg up xxx</p>

  <p>ctnguyenvn[~]$ sudo systemctl enable wg-quick@xxx</p>
</blockquote>

<h4 id="update">Update</h4>

<p>Nếu sau khi start VPN thành công nhưng không thể truy cập internet thì có thể
thay đổi Endpoint trong file <code class="language-plaintext highlighter-rouge">warp.conf</code> sang địa chỉ IP mới cụ thể
<code class="language-plaintext highlighter-rouge">Endpoint = 162.159.192.4:2408</code></p>

<blockquote>
  <p>Lưu ý:</p>

  <ul>
    <li>Tên file <code class="language-plaintext highlighter-rouge">warp.conf</code> này phụ thuộc vào các bước tạo file cấu hình</li>
    <li>Có thể thay đổi nội dung file này trực tiếp tại thư mục <code class="language-plaintext highlighter-rouge">/etc/wireguard/</code></li>
  </ul>
</blockquote>

<p>Sau đó khởi động lại warp</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctnguyenvn[~]$ sudo wg-quick down warp
ctnguyenvn[~]$ sudo wg-quick up warp
</code></pre></div></div>
</div>
    <div class="gap-2 my-4">
        <a href="https://twitter.com/intent/tweet?text=Cài đặt VPN Warp CloudFlare trên Linux&url=https://ctnguyenvn.github.io/2021/01/install-Warp-CloudFlare-on-linux/" class="px-2 py-1 rounded bg-gray-800 hover:bg-yellow-400"><i class="bi bi-twitter-x text-gray-200 hover:text-gray-800"></i></a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://ctnguyenvn.github.io/2021/01/install-Warp-CloudFlare-on-linux/" class="px-2 py-1 rounded bg-gray-800 hover:bg-yellow-400"><i class="bi bi-facebook text-gray-200 hover:text-gray-800"></i></a>
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ctnguyenvn.github.io/2021/01/install-Warp-CloudFlare-on-linux/&title=Cài đặt VPN Warp CloudFlare trên Linux=&source=ctnguyenvn" class="px-2 py-1 rounded bg-gray-800 hover:bg-yellow-400"><i class="bi bi-linkedin text-gray-200 hover:text-gray-800"></i></a>
        <a href="https://reddit.com/submit?url=https://ctnguyenvn.github.io/2021/01/install-Warp-CloudFlare-on-linux/&title=Cài đặt VPN Warp CloudFlare trên Linux" class="px-2 py-1 rounded bg-gray-800 hover:bg-yellow-400"><i class="bi bi-reddit text-gray-200 hover:text-gray-800"></i></a>
    </div>
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'https://ctnguyenvn.github.io/2021/01/install-Warp-CloudFlare-on-linux/';
        this.page.identifier = 'ctnguyenvn';
    };
    (function () {
        var d = document,
            s = d.createElement('script');
        s.src = 'https://ctnguyenvn.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

</div>
</main>
			<div class="border-t bg-black">
<div class="max-w-screen-xl mx-auto flex flex-col px-2 py-6 text-center">
    <p class="text-gray-300">
        <strong>@2024</strong>
        by
        <a href="/" class="hover:text-yellow-400">ctnguyenvn</a>
        /
        <a href="/tags" class="hover:text-yellow-400">Tags</a>
        /
        <a href="/archive" class="hover:text-yellow-400">Archive</a>
    </p>
</div>
</div>
		</div>
        <script src="https://ctnguyenvn.github.io/assets/js/custom.js"></script>
    </body>
</html>
