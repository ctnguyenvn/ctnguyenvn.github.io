<!doctype html>
<html lang="vi">
    <head>
    <title>
         Tìm kiếm subdomain không sử dụng brute-force | ctnguyenvn 
    </title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <meta property="og:description" content="Tuy nhiên bài viết này không focus vào vấn đề tìm kiếm thông tin khai thác mà chỉ giới hạn trong vấn đề tìm kiếm thông tin subdomain đối với một domain cụ thể nào đó. Khái niệm active scanning và passive scanning có thể hiểu trong trường hợp này là trực tiếp dò quét (bruteforce) đến mục tiêu và gián tiếp thông qua các search engine như bing/google…

Tiếp theo tôi xin chia sẻ về tìm kiếm subdomain (passive scanning) mà tôi hay dùng

Tìm kiếm subdomain manual

Suy cho cùng việc tìm kiếm không tác động trực tiếp đến target này phổ biến 2 loại là sử dụng search engine như Google, Bing cùng một số trang web như virustotal, censys, shodan… và thông qua thông tin về các certificate của webdomain đó.

Đối với search engine như Google, Bing tôi thường sử dụng dorks cơ bản như:

Đơn giản là site:domain.com, -site:domain.com hoặc kết hợp cả 2 ví như



hay như site:redhat.com -inurl:research.redhat.com -intitle:"Red hat"



Ưu điểm của việc này là có thể tìm kiếm một số subdomain không sử dụng HTTPS có thể bị xót.

Đối với thông tin từ các certs, tôi thường tìm một số thông tin trên các trang gồm:


  crt.sh
  censys.io
  virustotal
  shodan


Ưu điểm của các trang này là hiển thị nhanh chóng các subdomain. Tuy nhiên chúng ta vẫn phải trích xuất chúng một cách thủ công mặc dù có thể chưa hoàn toàn xác định được các domain này có còn hoạt động hay không. Trong một số trường hợp nhất định việc tìm kiếm này đôi khi cũng có nhiều thông tin hữu ích.



Tìm kiếm subdomain sử dụng công cụ

Việc sử dụng một công cụ nào đó thay thế về cơ bản chỉ là tự động hoá quá trình tìm kiếm manual. Có nhiều công cụ thực hiện công việc này như amass, Knock, Sublist3r hay đối với tôi thì công cụ thường xuyên xử dụng nhất là subfinder, công cụ này tốc độ nhanh và đặc biệt các option khá đơn giản khi sử dụng. Tất nhiên amass cũng là công cụ khá mạnh và hỗ trợ rất nhiều tính năng khác (kể cả bruteforce - active scanning).

└──╼ $./subfinder -d bachhoaxanh.com

               __    _____           __         
   _______  __/ /_  / __(_)___  ____/ /__  _____
  / ___/ / / / __ \/ /_/ / __ \/ __  / _ \/ ___/
 (__  ) /_/ / /_/ / __/ / / / / /_/ /  __/ /    
/____/\__,_/_.___/_/ /_/_/ /_/\__,_/\___/_/

        projectdiscovery.io

[INF] Current subfinder version v2.6.0 (latest)
[INF] Loading provider config from /home/admin/.config/subfinder/provider-config.yaml
[INF] Enumerating subdomains for bachhoaxanh.com
www.bachhoaxanh.com
cms.bachhoaxanh.com
hddt.bachhoaxanh.com
autodiscover.bachhoaxanh.com
mail.bachhoaxanh.com
owa.bachhoaxanh.com
staging.bachhoaxanh.com
alpha.bachhoaxanh.com
beta.bachhoaxanh.com
vieclam.bachhoaxanh.com
bachhoaxanh.com
[INF] Found 11 subdomains for bachhoaxanh.com in 30 seconds 2 milliseconds


Ưu điểm của phương thức này là thời gian tìm kiếm nhanh, ngoài ra hỗ trợ resolve ra các địa chỉ IP và cũng hỗ trợ kiểm tra trạng thái các subdomain này active/non-active.

└──╼ $./subfinder -active -ip -d bachhoaxanh.com

               __    _____           __         
   _______  __/ /_  / __(_)___  ____/ /__  _____
  / ___/ / / / __ \/ /_/ / __ \/ __  / _ \/ ___/
 (__  ) /_/ / /_/ / __/ / / / / /_/ /  __/ /    
/____/\__,_/_.___/_/ /_/_/ /_/\__,_/\___/_/

        projectdiscovery.io

[INF] Current subfinder version v2.6.0 (latest)
[INF] Loading provider config from /home/admin/.config/subfinder/provider-config.yaml
[INF] Enumerating subdomains for bachhoaxanh.com
alpha.bachhoaxanh.com,14.161.40.155,leakix
beta.bachhoaxanh.com,14.161.40.155,leakix
www.bachhoaxanh.com,103.48.76.192,digitorus
bachhoaxanh.com,103.48.76.192,digitorus
mail.bachhoaxanh.com,203.113.172.93,crtsh
vieclam.bachhoaxanh.com,103.48.76.199,anubis
staging.bachhoaxanh.com,103.48.76.192,leakix
hddt.bachhoaxanh.com,103.48.76.141,anubis
cms.bachhoaxanh.com,103.48.76.192,anubis
[INF] Found 9 subdomains for bachhoaxanh.com in 5 seconds 443 milliseconds


Tuy nhiên các công cụ này chỉ hỗ trợ một số trang miễn phí. Đối với một số trang khác để hiệu quả hơn trong việc tìm kiếm chúng ta cần sử dụng API key, có thể thêm vào config tại ~/.config/subfinder/provider-config.yaml.

└──╼ $cat /home/admin/.config/subfinder/provider-config.yaml
censys: []
    - ac331e2f-b635-4581-878a-66d4e79a2c13:dd53-1b6e-4655-83f6-f347b363def9
certspotter: []
dnsdb: []
dnsrepo: []
github: 
    - ghp_dbyJGU3jv1xmwk4SDXavrLDJ4dl2pSJMHHA1
passivetotal:
    - hunterman@simbox.io:HUnice_123
shodan:
    - PSKINdQe1GyxGgecYz2191H2JoS9qvgD
    - OefcMxcunkm72Po71vVtX8zUN57vQtAC
    - pHHlgpFt8Ka3Stb5UlTxcaEwciOeF2QM
threatbook: []
virustotal: []
whoisxmlapi: []
zoomeye: []
zoomeyeapi: []


Như vậy qua bài viết đơn giản này chúng ta có thể tìm kiếm các subdomain phục vụ cho một số nhu cầu công việc mà không cần phải dò quét tác động trực tiếp đến target.
" />
    
    <meta name="author" content="ctnguyenvn" />
    
    <meta property="og:title" content="Tìm kiếm subdomain không sử dụng brute-force - Happy Investigating" />
    <meta property="twitter:title" content="Tìm kiếm subdomain không sử dụng brute-force - Happy Investigating" />
     
    <meta property="og:image" content="https://ctnguyenvn.github.io/assets/img/ctnguyenvn.webp" />
    <meta property="twitter:image" content="https://ctnguyenvn.github.io/assets/img/ctnguyenvn.webp" />
    
    <meta property="og:site_name" content="ctnguyenvn - System security" />
    <!-- <link rel="stylesheet" type="text/css" href="https://ctnguyenvn.github.io/assets/css/bulma.min.css" /> -->
	<script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" type="text/css" href="https://ctnguyenvn.github.io/assets/css/styles.css" />
    <link rel="stylesheet" type="text/css" href="https://ctnguyenvn.github.io/assets/css/highlight.css" />
    <link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap" rel="stylesheet" />
    <link
        rel="alternate"
        type="application/rss+xml"
        title=" - Happy Investigating"
        href="https://ctnguyenvn.github.io/feed.xml"
    />
    <link rel="canonical" href="https://ctnguyenvn.github.io/2023/07/subdomain-enumeration-without-bruteforce/" />
    <meta name="theme-color" content="#000000" />
    <link rel="icon" type="image/png" sizes="32x32" href="https://ctnguyenvn.github.io/assets/img/ctnguyenvn.png" />
        
</head>

    <body>
		<div>
			<div class="border-b"><nav class="max-w-screen-xl mx-auto flex justify-between items-center p-4">
    <div class="">
        <a href="https://ctnguyenvn.github.io">
            <img src="https://ctnguyenvn.github.io/assets/img/ctnguyenvn.png" class="h-6" alt="ctnguyenvn" />
        </a>
    </div>
    <div class="hidden md:flex justify-center gap-6">
        <a href="/" class="text-xs font-medium uppercase px-2 hover:text-yellow-400">Home</a>
        <a href="/" class="text-xs font-medium uppercase px-2 hover:text-yellow-400">Blog</a>
        <a href="/projects" class="text-xs font-medium uppercase px-2 hover:text-yellow-400">Projects</a>
        <a href="/about" class="text-xs font-medium uppercase px-2 hover:text-yellow-400">About</a>
    </div>
    <div class="flex gap-4">
        <a href="https://github.com/ctnguyenvn" class="hover:text-yellow-400">
            <i class="bi bi-github"></i>
        </a>
        <a href="https://twitter.com/ctnguyenvn" class="hover:text-yellow-400">
            <i class="bi bi-twitter"></i>
        </a>
        <a href="https://t.me/ctnguyenvn" class="hover:text-yellow-400">
            <i class="bi bi-telegram"></i>
        </a>
    </div>
</nav>
</div>
			<main><div class="max-w-screen-lg mx-auto my-2 py-2 md:my-6 md:py-6 px-4">
    <div class="text-center pt-4">
        <p>
             
            <a class="text-sm bg-yellow-300 px-2 py-1 rounded px mx-1 hover:opacity-90" href="/tag/enumeration">enumeration</a>
             
        </p>
        <h1 class="text-4xl font-semibold pt-1 pb-2">
            <a href="/2023/07/subdomain-enumeration-without-bruteforce/" class="is-size-3 has-text-black-ter has-text-weight-semibold">Tìm kiếm subdomain không sử dụng brute-force</a>
        </h1>
        <div class="text-md pt-1">
            <span class="text-gray-400">Posted by</span>
            <a href="https://ctnguyenvn.github.io/about" class="text-[#007cc3]">ctnguyenvn</a>
            <span class="text-gray-400">on</span>
            <i class="bi bi-clock px-1 text-gray-400 text-sm"></i>
            <span class="text-[#007cc3]">1 July, 2023</span>
        </div>
    </div>
    <div class="content my-4 py-4 text-justify"><p>Tuy nhiên bài viết này không focus vào vấn đề tìm kiếm thông tin khai thác mà chỉ giới hạn trong vấn đề tìm kiếm thông tin subdomain đối với một domain cụ thể nào đó. Khái niệm active scanning và passive scanning có thể hiểu trong trường hợp này là trực tiếp dò quét (bruteforce) đến mục tiêu và gián tiếp thông qua các search engine như bing/google…</p>

<p>Tiếp theo tôi xin chia sẻ về tìm kiếm subdomain (passive scanning) mà tôi hay dùng</p>

<h4 id="tìm-kiếm-subdomain-manual">Tìm kiếm subdomain manual</h4>

<p>Suy cho cùng việc tìm kiếm không tác động trực tiếp đến target này phổ biến 2 loại là sử dụng search engine như Google, Bing cùng một số trang web như virustotal, censys, shodan… và thông qua thông tin về các certificate của webdomain đó.</p>

<p>Đối với search engine như Google, Bing tôi thường sử dụng <a href="https://www.exploit-db.com/google-hacking-database">dorks</a> cơ bản như:</p>

<p>Đơn giản là <code class="language-plaintext highlighter-rouge">site:domain.com</code>, <code class="language-plaintext highlighter-rouge">-site:domain.com</code> hoặc kết hợp cả 2 ví như</p>

<p><img src="/images/subdomain-enum/1.jpg" alt="" /></p>

<p>hay như <code class="language-plaintext highlighter-rouge">site:redhat.com -inurl:research.redhat.com -intitle:"Red hat"</code></p>

<p><img src="/images/subdomain-enum/2.jpg" alt="" /></p>

<p>Ưu điểm của việc này là có thể tìm kiếm một số subdomain không sử dụng HTTPS có thể bị xót.</p>

<p>Đối với thông tin từ các certs, tôi thường tìm một số thông tin trên các trang gồm:</p>

<ul>
  <li><a href="https://crt.sh/">crt.sh</a></li>
  <li><a href="https://search.censys.io/">censys.io</a></li>
  <li><a href="https://www.virustotal.com/">virustotal</a></li>
  <li><a href="https://shodan.io/">shodan</a></li>
</ul>

<p>Ưu điểm của các trang này là hiển thị nhanh chóng các subdomain. Tuy nhiên chúng ta vẫn phải trích xuất chúng một cách thủ công mặc dù có thể chưa hoàn toàn xác định được các domain này có còn hoạt động hay không. Trong một số trường hợp nhất định việc tìm kiếm này đôi khi cũng có nhiều thông tin hữu ích.</p>

<p><img src="/images/subdomain-enum/3.jpg" alt="" /></p>

<h4 id="tìm-kiếm-subdomain-sử-dụng-công-cụ">Tìm kiếm subdomain sử dụng công cụ</h4>

<p>Việc sử dụng một công cụ nào đó thay thế về cơ bản chỉ là tự động hoá quá trình tìm kiếm manual. Có nhiều công cụ thực hiện công việc này như <a href="https://github.com/owasp-amass/amass">amass</a>, <a href="https://github.com/guelfoweb/knock">Knock</a>, <a href="https://github.com/aboul3la/Sublist3r">Sublist3r</a> hay đối với tôi thì công cụ thường xuyên xử dụng nhất là <a href="https://github.com/projectdiscovery/subfinder">subfinder</a>, công cụ này tốc độ nhanh và đặc biệt các option khá đơn giản khi sử dụng. Tất nhiên amass cũng là công cụ khá mạnh và hỗ trợ rất nhiều tính năng khác (kể cả bruteforce - active scanning).</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>└──╼ <span class="nv">$.</span>/subfinder <span class="nt">-d</span> bachhoaxanh.com

               __    _____           __         
   _______  __/ /_  / __<span class="o">(</span>_<span class="o">)</span>___  ____/ /__  _____
  / ___/ / / / __ <span class="se">\/</span> /_/ / __ <span class="se">\/</span> __  / _ <span class="se">\/</span> ___/
 <span class="o">(</span>__  <span class="o">)</span> /_/ / /_/ / __/ / / / / /_/ /  __/ /    
/____/<span class="se">\_</span>_,_/_.___/_/ /_/_/ /_/<span class="se">\_</span>_,_/<span class="se">\_</span>__/_/

        projectdiscovery.io

<span class="o">[</span>INF] Current subfinder version v2.6.0 <span class="o">(</span>latest<span class="o">)</span>
<span class="o">[</span>INF] Loading provider config from /home/admin/.config/subfinder/provider-config.yaml
<span class="o">[</span>INF] Enumerating subdomains <span class="k">for </span>bachhoaxanh.com
www.bachhoaxanh.com
cms.bachhoaxanh.com
hddt.bachhoaxanh.com
autodiscover.bachhoaxanh.com
mail.bachhoaxanh.com
owa.bachhoaxanh.com
staging.bachhoaxanh.com
alpha.bachhoaxanh.com
beta.bachhoaxanh.com
vieclam.bachhoaxanh.com
bachhoaxanh.com
<span class="o">[</span>INF] Found 11 subdomains <span class="k">for </span>bachhoaxanh.com <span class="k">in </span>30 seconds 2 milliseconds
</code></pre></div></div>

<p>Ưu điểm của phương thức này là thời gian tìm kiếm nhanh, ngoài ra hỗ trợ resolve ra các địa chỉ IP và cũng hỗ trợ kiểm tra trạng thái các subdomain này active/non-active.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>└──╼ <span class="nv">$.</span>/subfinder <span class="nt">-active</span> <span class="nt">-ip</span> <span class="nt">-d</span> bachhoaxanh.com

               __    _____           __         
   _______  __/ /_  / __<span class="o">(</span>_<span class="o">)</span>___  ____/ /__  _____
  / ___/ / / / __ <span class="se">\/</span> /_/ / __ <span class="se">\/</span> __  / _ <span class="se">\/</span> ___/
 <span class="o">(</span>__  <span class="o">)</span> /_/ / /_/ / __/ / / / / /_/ /  __/ /    
/____/<span class="se">\_</span>_,_/_.___/_/ /_/_/ /_/<span class="se">\_</span>_,_/<span class="se">\_</span>__/_/

        projectdiscovery.io

<span class="o">[</span>INF] Current subfinder version v2.6.0 <span class="o">(</span>latest<span class="o">)</span>
<span class="o">[</span>INF] Loading provider config from /home/admin/.config/subfinder/provider-config.yaml
<span class="o">[</span>INF] Enumerating subdomains <span class="k">for </span>bachhoaxanh.com
alpha.bachhoaxanh.com,14.161.40.155,leakix
beta.bachhoaxanh.com,14.161.40.155,leakix
www.bachhoaxanh.com,103.48.76.192,digitorus
bachhoaxanh.com,103.48.76.192,digitorus
mail.bachhoaxanh.com,203.113.172.93,crtsh
vieclam.bachhoaxanh.com,103.48.76.199,anubis
staging.bachhoaxanh.com,103.48.76.192,leakix
hddt.bachhoaxanh.com,103.48.76.141,anubis
cms.bachhoaxanh.com,103.48.76.192,anubis
<span class="o">[</span>INF] Found 9 subdomains <span class="k">for </span>bachhoaxanh.com <span class="k">in </span>5 seconds 443 milliseconds
</code></pre></div></div>

<p>Tuy nhiên các công cụ này chỉ hỗ trợ một số trang miễn phí. Đối với một số trang khác để hiệu quả hơn trong việc tìm kiếm chúng ta cần sử dụng API key, có thể thêm vào config tại <code class="language-plaintext highlighter-rouge">~/.config/subfinder/provider-config.yaml</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">└──╼ $cat /home/admin/.config/subfinder/provider-config.yaml</span>
<span class="na">censys</span><span class="pi">:</span> <span class="pi">[]</span>
    <span class="pi">-</span> <span class="s">ac331e2f-b635-4581-878a-66d4e79a2c13:dd53-1b6e-4655-83f6-f347b363def9</span>
<span class="na">certspotter</span><span class="pi">:</span> <span class="pi">[]</span>
<span class="na">dnsdb</span><span class="pi">:</span> <span class="pi">[]</span>
<span class="na">dnsrepo</span><span class="pi">:</span> <span class="pi">[]</span>
<span class="na">github</span><span class="pi">:</span> 
    <span class="pi">-</span> <span class="s">ghp_dbyJGU3jv1xmwk4SDXavrLDJ4dl2pSJMHHA1</span>
<span class="na">passivetotal</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">hunterman@simbox.io:HUnice_123</span>
<span class="na">shodan</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">PSKINdQe1GyxGgecYz2191H2JoS9qvgD</span>
    <span class="pi">-</span> <span class="s">OefcMxcunkm72Po71vVtX8zUN57vQtAC</span>
    <span class="pi">-</span> <span class="s">pHHlgpFt8Ka3Stb5UlTxcaEwciOeF2QM</span>
<span class="na">threatbook</span><span class="pi">:</span> <span class="pi">[]</span>
<span class="na">virustotal</span><span class="pi">:</span> <span class="pi">[]</span>
<span class="na">whoisxmlapi</span><span class="pi">:</span> <span class="pi">[]</span>
<span class="na">zoomeye</span><span class="pi">:</span> <span class="pi">[]</span>
<span class="na">zoomeyeapi</span><span class="pi">:</span> <span class="pi">[]</span>
</code></pre></div></div>

<p>Như vậy qua bài viết đơn giản này chúng ta có thể tìm kiếm các subdomain phục vụ cho một số nhu cầu công việc mà không cần phải dò quét tác động trực tiếp đến target.</p>
</div>
    <div class="gap-2 my-4">
        <a href="https://twitter.com/intent/tweet?text=Tìm kiếm subdomain không sử dụng brute-force&url=https://ctnguyenvn.github.io/2023/07/subdomain-enumeration-without-bruteforce/" class="px-2 py-1 rounded bg-gray-800 hover:bg-yellow-400"><i class="bi bi-twitter-x text-gray-200 hover:text-gray-800"></i></a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://ctnguyenvn.github.io/2023/07/subdomain-enumeration-without-bruteforce/" class="px-2 py-1 rounded bg-gray-800 hover:bg-yellow-400"><i class="bi bi-facebook text-gray-200 hover:text-gray-800"></i></a>
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ctnguyenvn.github.io/2023/07/subdomain-enumeration-without-bruteforce/&title=Tìm kiếm subdomain không sử dụng brute-force=&source=ctnguyenvn" class="px-2 py-1 rounded bg-gray-800 hover:bg-yellow-400"><i class="bi bi-linkedin text-gray-200 hover:text-gray-800"></i></a>
        <a href="https://reddit.com/submit?url=https://ctnguyenvn.github.io/2023/07/subdomain-enumeration-without-bruteforce/&title=Tìm kiếm subdomain không sử dụng brute-force" class="px-2 py-1 rounded bg-gray-800 hover:bg-yellow-400"><i class="bi bi-reddit text-gray-200 hover:text-gray-800"></i></a>
    </div>
    <!-- <div class="flex justify-between gap-2 my-8"> -->
    <!--      -->
    <!--     <div class="w-1/2 text-left"> -->
    <!--         <a class="prev" href="/2023/02/collect-log-from-cisco-ios-to-ELK/"> -->
    <!--              -->
    <!--             <img src="https://ctnguyenvn.github.io/images/ELK/cisco/1.png" class="hidden md:inline-block h-60 hover:opacity-80" /> -->
    <!--              -->
    <!--         </a> -->
    <!--         <div class="py-1"> -->
    <!--             <i class="bi bi-skip-start"></i> -->
    <!--             Previous Page -->
    <!--         </div> -->
    <!--         <a class="text-xl font-semibold hover:text-[#007cc3] hover:border-b-2 hover:border-b-2" href="/2023/02/collect-log-from-cisco-ios-to-ELK/">Thu thập log từ Cisco IOS về SIEM (ELK)</a> -->
    <!--     </div> -->
    <!--       -->
    <!-- </div> -->
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'https://ctnguyenvn.github.io/2023/07/subdomain-enumeration-without-bruteforce/';
        this.page.identifier = 'ctnguyenvn';
    };
    (function () {
        var d = document,
            s = d.createElement('script');
        s.src = 'https://ctnguyenvn.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

</div>
</main>
			<div class="border-t bg-black">
<div class="max-w-screen-xl mx-auto flex flex-col px-2 py-6 text-center">
    <p class="text-gray-300">
        <strong>@2024</strong>
        by
        <a href="/" class="hover:text-yellow-400">ctnguyenvn</a>
        /
        <a href="/tags" class="hover:text-yellow-400">Tags</a>
        /
        <a href="/archive" class="hover:text-yellow-400">Archive</a>
    </p>
</div>
</div>
		</div>
        <script src="https://ctnguyenvn.github.io/assets/js/custom.js"></script>
    </body>
</html>
